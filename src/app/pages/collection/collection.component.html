<div class="collection-container container fade-in">
  <section class="collection-info-section">
    <div class="collection-info-inner">
      <h1 class="collection-title">Collection T-Shirts AURADHOM</h1>
      <p class="collection-lead">Découvrez la nouvelle collection de t-shirts AURADHOM, pensée pour les esprits libres et les passionnés de style simple mais affirmé.</p>
      <p class="collection-text">Chaque pièce est conçue pour offrir confort, élégance et durabilité. Nos t-shirts sont disponibles en cinq couleurs intemporelles — blanc, noir, beige, marron et gris — pour s’adapter à chaque personnalité.</p>
    </div>
  </section>

  <main class="product-grid-container">
    <div class="product-grid">
      @for(product of filteredProducts(); track product.id) {
        <div class="product-card">
          <div class="product-image-wrapper">
            <a [routerLink]="['/produit', product.slug]" class="product-link">
              <img [src]="getPreview(product)" [alt]="product.name" class="product-main-image">
            </a>
          </div>
          <div class="product-info">
            <div class="product-details">
              <span class="product-name">{{ product.name }}</span>
              @if(product.colors?.length) {
                <span class="product-color">{{ product.colors[0].name }}</span>
              }
              @if(product.sizes?.length) {
                <span class="product-sizes">Tailles: {{ product.sizes.join(', ') }}</span>
              }
            </div>
            <span class="product-price">{{ product.price | formatFcfa }}</span>
          </div>
          <div class="thumb-row" aria-label="Galerie">
            @if(thumbsById()[product.id]?.length) {
              @for(img of thumbsById()[product.id].slice(0,3); track img; let idx = $index) {
                <button 
                  type="button" 
                  class="thumb" 
                  [class.active]="getPreview(product) === img"
                  (click)="setPreview(product.id, img)" 
                  [attr.aria-label]="'Vue ' + (idx + 1)">
                  <img [src]="img" [alt]="'Vue ' + (idx + 1)">
                </button>
              }
            } @else {
              @for(color of product.colors; track color.name) {
                <button type="button" class="thumb" (click)="setPreview(product.id, resolveColorImage(color.name))" [attr.aria-label]="'Prévisualiser ' + color.name">
                  <img [src]="resolveColorImage(color.name)" [alt]="'Miniature ' + color.name">
                </button>
              }
            }
          </div>
        </div>
      } @empty {
        <p class="no-results">Aucun produit ne correspond à votre sélection.</p>
      }
    </div>
  </main>
</div>
