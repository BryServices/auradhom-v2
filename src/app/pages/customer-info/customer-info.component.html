<div class="customer-form-container container fade-in">
    <h2 class="form-title">Informations de livraison</h2>
    
    <form [formGroup]="customerForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label class="form-label" for="lastName">Nom</label>
            <input 
                id="lastName"
                type="text"
                class="form-control"
                formControlName="lastName"
                [class.is-invalid]="customerForm.get('lastName')?.invalid && customerForm.get('lastName')?.touched">
            @if (customerForm.get('lastName')?.invalid && customerForm.get('lastName')?.touched) {
                <div class="error-message">Le nom est requis</div>
            }
        </div>

        <div class="form-group">
            <label class="form-label" for="firstName">Prénom</label>
            <input 
                id="firstName"
                type="text"
                class="form-control"
                formControlName="firstName"
                [class.is-invalid]="customerForm.get('firstName')?.invalid && customerForm.get('firstName')?.touched">
            @if (customerForm.get('firstName')?.invalid && customerForm.get('firstName')?.touched) {
                <div class="error-message">Le prénom est requis</div>
            }
        </div>

        <div class="form-group">
            <label class="form-label" for="phone">Téléphone</label>
            <input 
                id="phone"
                type="tel"
                class="form-control"
                formControlName="phone"
                [class.is-invalid]="customerForm.get('phone')?.invalid && customerForm.get('phone')?.touched">
            @if (customerForm.get('phone')?.invalid && customerForm.get('phone')?.touched) {
                <div class="error-message">Numéro de téléphone invalide (format: +242 XXXXXXXX)</div>
            }
        </div>

        <div class="form-group">
            <label class="form-label" for="department">Département</label>
            <select 
                id="department"
                class="form-control"
                formControlName="department"
                [class.is-invalid]="customerForm.get('department')?.invalid && customerForm.get('department')?.touched">
                <option value="">Sélectionnez un département</option>
                @for (dept of departments; track dept.id) {
                    <option [value]="dept.id">{{dept.name}}</option>
                }
            </select>
            @if (customerForm.get('department')?.invalid && customerForm.get('department')?.touched) {
                <div class="error-message">Le département est requis</div>
            }
        </div>

        <div class="form-group">
            <label class="form-label" for="city">Ville</label>
            <select 
                id="city"
                class="form-control"
                formControlName="city"
                [class.is-invalid]="customerForm.get('city')?.invalid && customerForm.get('city')?.touched">
                <option value="">Sélectionnez une ville</option>
                @for (city of cities; track city.id) {
                    <option [value]="city.id">{{city.name}}</option>
                }
            </select>
            @if (customerForm.get('city')?.invalid && customerForm.get('city')?.touched) {
                <div class="error-message">La ville est requise</div>
            }
        </div>

        <div class="form-group">
            <label class="form-label" for="district">Quartier</label>
            @if (!customDistrict) {
                <select 
                    id="district"
                    class="form-control"
                    formControlName="district"
                    [class.is-invalid]="customerForm.get('district')?.invalid && customerForm.get('district')?.touched">
                    <option value="">Sélectionnez un quartier</option>
                    @for (district of districts; track district) {
                        <option [value]="district">{{district}}</option>
                    }
                </select>
            } @else {
                <input 
                    type="text"
                    class="form-control"
                    formControlName="district"
                    placeholder="Saisissez votre quartier"
                    [class.is-invalid]="customerForm.get('district')?.invalid && customerForm.get('district')?.touched">
            }
            @if (customerForm.get('district')?.invalid && customerForm.get('district')?.touched) {
                <div class="error-message">Le quartier est requis</div>
            }
            <button type="button" class="custom-district-toggle" (click)="toggleCustomDistrict()">
                {{ customDistrict ? 'Sélectionner dans la liste' : 'Mon quartier n\'est pas dans la liste' }}
            </button>
        </div>

        <div class="form-group">
            <label class="form-label" for="address">Adresse complète</label>
            <textarea 
                id="address"
                class="form-control"
                formControlName="address"
                rows="3"
                [class.is-invalid]="customerForm.get('address')?.invalid && customerForm.get('address')?.touched"></textarea>
            @if (customerForm.get('address')?.invalid && customerForm.get('address')?.touched) {
                <div class="error-message">L'adresse est requise</div>
            }
        </div>

        <button 
            type="submit" 
            class="submit-button"
            [disabled]="customerForm.invalid">
            Valider
        </button>
    </form>
</div>